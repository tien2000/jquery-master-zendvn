<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Keyboard Events</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/style.css" />
    
    <script type="text/javascript">
        /*
            Thêm dấu "." vào đơn vị tiền tệ.
        */
        window.onload = function(){
            var txtMoney = document.appForm.money;
            var t = "Nhập số tiền vào đây...";
            if (txtMoney.value == "") {
                txtMoney.value = t;
                txtMoney.style.color = "#ccc";
            }

            txtMoney.onclick = function(){
                this.style.backgroundColor = "#FFC";
                if (this.value == t) {
                    this.value = "";
                    this.style.color = "#000";
                }
            }

            txtMoney.onkeyup = function(){
                var vMoney = this.value;
                vMoney = vMoney.replace(/[^\d]+/g, '');     // Loại bỏ ký tự chữ, chỉ nhập số.
                var vNewMoney = "";

                if (vMoney.length > 3) {
                    console.log(vMoney.length);
                    var x = 1;                              // Chạy vòng lặp kiểm tra vị trí.
                    for (var i = vMoney.length - 1; i >= 0; i--) {
                        console.log("phantu[" + i + "] = " + vMoney[i]);
                        vNewMoney = vNewMoney + "" + vMoney[i];

                        if (x % 3 == 0) {
                            vNewMoney = vNewMoney + ".";
                        }
                        x++;
                    }

                    var tmp = "";
                    for (var i = vNewMoney.length - 1; i >= 0; i--) {
                        tmp = tmp + "" + vNewMoney[i];                        
                    }
                    vNewMoney = tmp.replace(/^[\.]/g, '');        
                    console.log(tmp);            
                } else{
                    vNewMoney = vMoney;
                }
                
                this.value = vNewMoney;

                // console.log(vNewMoney);
                
            }
        }
    </script>
</head>
<body>
    <h1>Keyboard Events</h1>
    <form class="box" action="" name="appForm" method="post" enctype="multipart/form-data">
        <label for="">Money: </label>
        <br>
        <input type="text" name="money" class="input" id="money">
    </form>
</body>
</html>